var CustomifyAutoCSS=window.CustomifyAutoCSS||null;!function(u,o){(CustomifyAutoCSS=function(){this.values={},this.lastValues={},this.devices=["desktop","tablet","mobile"]})._change=!1,CustomifyAutoCSS.prototype.fonts={},CustomifyAutoCSS.prototype.styling_fields={color:null,image:null,position:null,cover:null,repeat:null,attachment:null,border_width:null,border_color:null,border_style:null},CustomifyAutoCSS.prototype.subsets={},CustomifyAutoCSS.prototype.variants={},CustomifyAutoCSS.prototype.media_queries={all:"%s",desktop:"%s",tablet:"@media screen and (max-width: 1024px) { %s }",mobile:"@media screen and (max-width: 568px) { %s }"},CustomifyAutoCSS.prototype.css={all:"",desktop:"",tablet:"",mobile:""},CustomifyAutoCSS.prototype.box_shadow_fields={color:null,x:0,y:0,blur:0,spread:0,inset:null},CustomifyAutoCSS.prototype.reset=function(){this.fonts={},this.subsets={},this.variants={},this.css={all:"",desktop:"",tablet:"",mobile:""}},CustomifyAutoCSS.prototype.encodeValue=function(e){return encodeURI(JSON.stringify(e))},CustomifyAutoCSS.prototype.decodeValue=function(e){return JSON.parse(decodeURI(e))},CustomifyAutoCSS.prototype.loop_fields=function(e,s,n,i){_.isUndefined(n)&&(n=!1),_.isObject(s)||(s={});var o=this,r={};return _.each(e,function(e){var t=_.isUndefined(s[e.name])?null:s[e.name];if((!_.isNull(t)||!n)&&e.selector&&e.css_format)switch(e.type){case"css_ruler":r[e.name]=o.css_ruler(e,t,i);break;case"slider":r[e.name]=o.slider(e,t,i);break;case"color":r[e.name]=o.color(e,t,i);break;case"shadow":r[e.name]=o.shadow(e,t,i);break;case"checkbox":"html_class"==e.css_format?o.html_class(e,t):r[e.name]=o.checkbox(e,t,i);break;case"image":r[e.name]=o.image(e,t,i);break;case"text_align":case"text_align_no_justify":r[e.name]=o.text_align(e,t,i);break;case"font":r[e.name]=o.font(e,t,i);break;case"styling":r[e.name]=o.styling(e,t,i);break;case"typography":r[e.name]=o.typography(e,t,i);break;case"modal":o.modal(e,t);break;default:switch(e.css_format){case"background":case"styling":r[e.name]=o.styling(e,t,i);break;case"typography":r[e.name]=o.typography(e,t,i);break;case"html_class":o.html_class(e,t);break;case"html_replace":o.html_replace(e,t);break;default:r[e.name]=o.maybe_devices_setup(e,"setup_default",t,i)}}}),r},CustomifyAutoCSS.prototype.run=function(e){_.isUndefined(e)&&(e=!1),this.lastValues=this.values,this.values=o.get(),window.Customify_JS&&window.Customify_JS.css_media_queries&&(this.media_queries=window.Customify_JS.css_media_queries),this.reset();var s=this;s.loop_fields(Customify_Preview_Config.fields);var n="",i=0;_.each(s.css,function(e,t){n+=(0<i?"\r\n\r\n\r\n\r\n\r":"")+s.media_queries[t].replace(/%s/g,e)+"\r\n",i++});var t=s.get_google_fonts_url();u("#customify-google-font-css").length<=0&&u("head").prepend("<link rel='stylesheet' id='customify-google-font-css'  href='' type='text/css' media='all' />"),t?u("#customify-google-font-css").attr("href",t):u("#customify-google-font-css").remove(),n=n.trim(),u("#customify-style-inline-css").length<=0&&u("head").append("<style id='customify-style-inline-css' type='text/css'></style>"),u("#customify-style-inline-css").html(n),u(document).trigger("header_builder_panel_changed",["auto_render_css",e]),u(document).trigger("after_auto_render_css",["after_auto_render_css",e])},CustomifyAutoCSS.prototype.get_setting=function(e,t,s){_.isUndefined(t)&&(t="desktop"),_.isUndefined(s)&&(s=!1);var n,i,o,r=null,a=!1;if(_.isUndefined(Customify_Preview_Config.fields["setting|"+e])||(i=Customify_Preview_Config.fields["setting|"+e],a=!_.isUndefined(i.default)&&i.default),n=_.isUndefined(this.values[e])?a:this.values[e],_.isString(n))try{var l=this.decodeValue(n);_.isNull(l)||(n=l)}catch(e){}return s?(o=!!_.isUndefined(n[s])&&n[s],r="all"!==t&&_.isObject(o)&&_.isObject(o)&&!_.isUndefined(o[t])?o[t]:o):"all"!==t?_.isObject(n)&&!_.isUndefined(n[t])&&(r=n[t]):r=n,r},CustomifyAutoCSS.prototype.get_google_fonts_url=function(){var e="//fonts.googleapis.com/css?family=",s="",n=this;return!_.isEmpty(n.fonts)&&(_.each(n.fonts,function(e){s&&(s+="|"),s+=e.replace(/\s/g,"+");var t={};_.isUndefined(n.variants[e])||_.each(n.variants[e],function(e){if("regular"!==e)switch(e){case"italic":t[e]="400i";break;default:_.isString(e)?t[e]=e.replace("italic","i"):t[e]=e}else t[e]="400"}),_.isEmpty(t)||(s+=":"+n.join(t,","))}),e+=s,_.isEmpty(n.subsets)||(e+="&subset="+n.join(n.subsets,",")),e)},CustomifyAutoCSS.prototype.join=function(e,t){return _.isUndefined(t)&&(t=""),_.isArray(e)?e.join(t):!_.isObject(e)||_.isEmpty(e)?"":_.values(e).join(t)},CustomifyAutoCSS.prototype.str_value=function(e,t,s){if(_.isEmpty(e))return"";if(!_.isString(t))return"";_.isUndefined(s)&&(s="");var n=new RegExp("{{value}}","g"),i=t.replace(n,e),o=new RegExp("{{value_no_unit}}","g");return i=i.replace(o,s)},CustomifyAutoCSS.prototype.setup_color=function(e,t){return!(!t||!e)&&this.str_value(e,t)},CustomifyAutoCSS.prototype.setup_checkbox=function(e,t){return!(!t||!e)&&t},CustomifyAutoCSS.prototype.setup_image=function(e,t){var s=this.sanitize_media(e);return!(!s.url||!t)&&this.str_value(s.url,t)},CustomifyAutoCSS.prototype.setup_slider=function(e,t){_.isObject(e)||(e={}),(e=_.defaults(e,{unit:"px",value:null})).unit||(e.unit="px");var s,n="";return t&&e.value&&(s=e.value+e.unit,n=this.str_value(s,t,e.value)),n},CustomifyAutoCSS.prototype.setup_shadow=function(e,t){if(!_.isObject(e))return"";var s=_.defaults(e,this.box_shadow_fields),n=this.sanitize_color(s.color),i=s.inset?"inset":"";if(!n)return"";s.blur||(s.blur=0),s.spread||(s.spread=0),s.x||(s.x=0),s.y||(s.y=0);var o=s.x+"px "+s.y+"px "+s.blur+"px "+s.spread+"px "+n+" "+i;return this.str_value(o,t)},CustomifyAutoCSS.prototype.setup_default=function(e,t){return!(!t||!e)&&this.str_value(e,t)},CustomifyAutoCSS.prototype.setup_css_ruler=function(n,e){_.isObject(n)||(n={}),n=_.defaults(n,{unit:"",top:"",right:"",bottom:"",left:""}),_.isUndefined(n.unit)||(n.unit="px"),e=_.defaults(e,{top:"",right:"",bottom:"",left:""});var i=this,o={};return _.each(e,function(e,t){var s=n[t];s&&e&&e&&(s+=n.unit,o[t]=i.str_value(s,e))}),i.join(o,"\n\t")},CustomifyAutoCSS.prototype.setup_text_align=function(e,t){return!(!t||!e)&&this.str_value(e,t)},CustomifyAutoCSS.prototype.sanitize_color=function(e){return e},CustomifyAutoCSS.prototype.sanitize_slider=function(e){return e=_.defaults(e,{unit:"px",value:null})},CustomifyAutoCSS.prototype.sanitize_media=function(e){return _.isObject(e)||(e={}),_.defaults(e,{id:null,url:null,mime:null})},CustomifyAutoCSS.prototype.maybe_devices_setup=function(n,i,o,e){var t="",r={},s=!1,a=!_.isEmpty(n.css_format)&&n.css_format,l=this;_.isUndefined(e)&&(e=!1);var u=!1;return(_.isUndefined(o)||_.isNull(o))&&(o={},u=!0),!_.isUndefined(n.device_settings)&&n.device_settings?(s=!0,_.each(l.devices,function(e){var t=null;u?t=l.get_setting(n.name,e):_.isUndefined(o[e])||(t=o[e]);var s=!1;l[i]&&(s=l[i](t,a)),s&&(r[e]=s)})):(u&&(o=l.get_setting(n.name,"all")),l[i]&&(t=l[i](o,a)),r.no_devices=t),_.isEmpty(r),t="",e?r:(s?_.each(l.devices,function(e){var t;_.isUndefined(r[e])||(t=r[e])&&("format"===n.selector?l.css[e]+="\r\n"+t+"\r\n":l.css[e]+="\r\n"+n.selector+" {\r\n\t"+t+"\r\n}\r\n")}):r.no_devices&&("format"===n.selector?l.css.all+="\r\n"+r.no_devices+"\r\n":l.css.all+="\r\n"+n.selector+"  {\r\n\t"+r.no_devices+"\r\n}\r\n"),t)},CustomifyAutoCSS.prototype.setup_font=function(e){return _.isObject(e)||(e={}),(e=_.defaults(e,{font:null,type:null,variant:null,subsets:null,font_data:null})).font?("google"==e.type&&(this.fonts[e.font]=e.font,e.variant&&_.isUndefined(this.variants[e.font])&&(this.variants[e.font]={},_.isString(e.variant)?((t={})[e.variant]=e.variant,this.variants[e.font]=_.extend(this.variants[e.font],t)):this.variants[e.font]=_.extend(this.variants[e.font],e.variant)),e.subsets&&(this.subsets=_.extend(this.subsets,e.subsets))),'font-family: "'+e.font+'";'):"";var t},CustomifyAutoCSS.prototype.font=function(n,i){var o="",r=this;return n.device_settings?_.each(this.devices,function(e){var t=null;_.isEmpty(i)?t=r.get_setting(n.name,e):_.isUndefined(i[e])||(e=i[e]);var s=r.setup_font(t);s&&(r.css[e]="\r\n"+n.selector+" {\r\n\t"+s+"\r\n}\r\n",o+="desktop"===e?"\r\n"+n.selector+" {\r\n\t"+s+"\r\n}":"\r\n."+e+" "+n.selector+" {\r\n\t"+s+"\r\n}\r\n")}):(_.isEmpty(i)&&(i=r.get_setting(n.name)),o=r.setup_font(i),r.css.all+=" "+n.selector+"  {\r\n\t"+o+"\r\n}\r\n",o+=" "+n.selector+"  {\r\n\t"+o+"\r\n}\r\n"),o},CustomifyAutoCSS.prototype.css_ruler=function(e,t,s){return this.maybe_devices_setup(e,"setup_css_ruler",t,s)},CustomifyAutoCSS.prototype.shadow=function(e,t,s){return this.maybe_devices_setup(e,"setup_shadow",t,s)},CustomifyAutoCSS.prototype.slider=function(e,t,s){return this.maybe_devices_setup(e,"setup_slider",t,s)},CustomifyAutoCSS.prototype.color=function(e,t,s){return this.maybe_devices_setup(e,"setup_color",t,s)},CustomifyAutoCSS.prototype.checkbox=function(e,t,s){return this.maybe_devices_setup(e,"setup_checkbox",t,s)},CustomifyAutoCSS.prototype.image=function(e,t,s){return this.maybe_devices_setup(e,"setup_image",t,s)},CustomifyAutoCSS.prototype.text_align=function(e,t,s){return this.maybe_devices_setup(e,"setup_text_align",t,s)},CustomifyAutoCSS.prototype.setup_styling_fields=function(t,e,s,n){var i,o=this;return _.isObject(s)||(s={}),_.isUndefined(n)&&(n="normal"),!1===t?null:(_.isObject(t)||(t={}),i={},_.each(e,function(e){_.isUndefined(o.box_shadow_fields[e.name])?(_.isUndefined(t[e.name])||t[e.name])&&(i[e.name]=e,_.isUndefined(s[n+"_"+e.name])?i[e.name].selector=s[n]:i[e.name].selector=s[n+"_"+e.name],0):(_.isUndefined(t[e.name])||t[e.name])&&(i[e.name]=e,i[e.name].selector=null)}),i)},CustomifyAutoCSS.prototype.styling=function(e){var n=this,t=this.get_setting(e.name,"all");_.isObject(t)||_.isArray(t)||(t={}),t=_.defaults(t,{normal:{},hover:{}});var s={};_.isString(e.selector)?(s.normal=e.selector,s.hover=e.selector):s=_.defaults(e.selector,{normal:null,hover:null});var i=null,o=-1,r=-1;!_.isUndefined(e.fields)&&_.isObject(e.fields)&&(_.isUndefined(e.fields.tabs)||(i=e.tabs),_.isUndefined(e.fields.normal_fields)||(o=e.normal_fields),_.isUndefined(e.fields.hover_fields)||(r=e.hover_fields));var a=n.setup_styling_fields(o,Customify_Preview_Config.styling_config.normal_fields,s,"normal"),l=n.setup_styling_fields(r,Customify_Preview_Config.styling_config.hover_fields,s,"hover"),u=_.clone(Customify_Preview_Config.styling_config.tabs);!1===i?u.hover=!1:_.isObject(i)&&(u=i);function f(e,t){_.each(e,function(s,e){_.isUndefined(c[s.selector])&&(c[s.selector]=""),_.isUndefined(t[e])||(_.isUndefined(t[e].no_devices)?_.each(t[e],function(e,t){_.isUndefined(d[t])&&(d[t]={}),_.isUndefined(d[t][s.selector])&&(d[t][s.selector]=""),e&&(d[t][s.selector]+=e)}):t[e].no_devices&&(c[s.selector]+=t[e].no_devices))})}var c={},d={};_.isEmpty(t)||_.isUndefined(t.normal.bg_image)||n.sanitize_media(t.normal.bg_image).url||(delete t.normal.bg_repeat,delete t.normal.bg_cover,delete t.normal.bg_position,delete t.normal.bg_attachment);var m=n.loop_fields(a,t.normal,!0,!0),p=n.loop_fields(l,t.hover,!0,!0);f(a,m),f(l,p),_.each(c,function(e,t){n.css.all+="\r\n"+t+"  {\r\n\t"+e+"\r\n}\r\n"}),_.each(n.devices,function(e){var t,s="";_.isUndefined(d[e])||(t=d[e],_.each(t,function(e,t){_.isString(e)?s+="\r\n"+t+"  {\r\n\t"+e+"\r\n}\r\n":s+="\r\n"+t+"  {\r\n\t"+n.join(e,"\n")+"\r\n}\r\n"})),n.css[e]+=s})},CustomifyAutoCSS.prototype.modal=function(s){var n=this,i=this.get_setting(s.name,"all");_.isObject(i)||(i={}),_.isObject(s.fields.tabs)&&_.each(s.fields.tabs,function(e,t){_.isObject(s.fields[t+"_fields"])&&n.loop_fields(s.fields[t+"_fields"],i[t])})},CustomifyAutoCSS.prototype.setup_font_style=function(e){_.isObject(e)||(e={});var t={};(e=_.defaults(e,{b:null,i:null,u:null,s:null,t:null})).b&&(t.b="font-weight: bold;"),e.i&&(t.i="font-style: italic;");var s={};return e.u&&(s.underline="underline"),e.s&&(s["line-through"]="line-through"),_.isEmpty(s)||(t.d="text-decoration: "+this.join(s," ")+";"),e.t&&(t.t="text-transform: uppercase;"),this.join(t,"\r\n\t")},CustomifyAutoCSS.prototype.html_replace=function(e,t){var s=e.selector,n=_.clone(t);(_.isUndefined(n)||_.isEmpty(n))&&(n=e.default),u(s).html(n)},CustomifyAutoCSS.prototype.html_class=function(n,e){var t,s,i=_.isUndefined(e)?_.clone(e):this.get_setting(n.name,"all"),o=n.selector,r=null,a="checkbox"===n.type;if(_.isUndefined(this.lastValues[n.name])||(r=this.lastValues[n.name]),_.isString(r))try{var l=this.decodeValue(r);_.isNull(l)||(r=l)}catch(e){}!a||!_.isUndefined(n.device_settings)&&n.device_settings?(_.isString(r)&&!_.isEmpty(r)?u(o).removeClass(r):_.isObject(r)&&_.each(r,function(e,t){var s;e&&(s=t+"--"+e,a&&(s=n.name+"-"+s),u(o).removeClass(s))}),_.isString(i)?u(o).addClass(i):_.isObject(i)&&_.each(i,function(e,t){var s;e&&(s=t+"--"+e,a&&(s=n.name+"-"+s),u(o).addClass(s))})):(s=1<(t=n.name.split("__")).length?t[1]+"-active":n.name+"-active",i?u(o).addClass(s):u(o).removeClass(s))},CustomifyAutoCSS.prototype.typography=function(s,e){!_.isUndefined(e)&&_.isObject(e)||(e=this.get_setting(s.name,"all"));var n=this;_.isObject(e)||(e={}),e=_.defaults(e,{font:null,font_type:null,languages:null,font_size:null,font_weight:null,line_height:null,letter_spacing:null,style:null,text_decoration:null,text_transform:null});var t,i,o,r={},a={},l={};_.each(Customify_Preview_Config.typo_fields,function(e){a[e.name]=e}),_.isUndefined(a.font)||(r.font=this.setup_font({font:e.font,type:e.font_type,subsets:e.languages,variant:e.variant})),_.isUndefined(a.style)||e.style&&"default"!==e.style&&(r.style="font-style: "+e.style+";"),_.isUndefined(a.font_weight)||e.font_weight&&"default"!==e.font_weight&&"default"!==e.font_weight&&("regular"===e.font_weight&&(e.font_weight="normal"),r.font_weight="font-weight: "+e.font_weight+";"),_.isUndefined(a.text_decoration)||e.text_decoration&&"default"!==e.text_decoration&&(r.text_decoration="text-decoration: "+e.text_decoration+";"),_.isUndefined(a.text_transform)||e.text_transform&&"default"!==e.text_transform&&(r.text_transform="text-transform: "+e.text_transform+";"),_.isUndefined(a.font_size)||(a.font_size.css_format="font-size: {{value}};",t=this.maybe_devices_setup(a.font_size,"setup_slider",e.font_size,!0),_.isEmpty(t)||(_.isUndefined(t.no_devices)?_.each(t,function(e,t){"desktop"==t?r.font_size=e:(_.isUndefined(l[t])&&(l[t]={}),l[t].font_size=e)}):r.font_size=t.no_devices)),_.isUndefined(a.line_height)||(a.line_height.css_format="line-height: {{value}};",i=this.maybe_devices_setup(a.line_height,"setup_slider",e.line_height,!0),_.isEmpty(i)||(_.isUndefined(i.no_devices)?_.each(i,function(e,t){"desktop"==t?r.line_height=e:(_.isUndefined(l[t])&&(l[t]={}),l[t].line_height=e)}):r.line_height=i.no_devices)),_.isUndefined(a.letter_spacing)||(a.letter_spacing.css_format="letter-spacing: {{value}};",(o=this.maybe_devices_setup(a.letter_spacing,"setup_slider",e.letter_spacing,!0))&&(_.isUndefined(o.no_devices)?_.each(o,function(e,t){"desktop"==t?r.letter_spacing=e:(_.isUndefined(l[t])&&(l[t]={}),l[t].letter_spacing=e)}):r.letter_spacing=o.no_devices)),_.each(l,function(e,t){n.css[t]+=" "+s.selector+" {\r\n\t"+n.join(e,"\r\n\t")+"\r\n}"}),n.css.all+=" "+s.selector+" {\r\n\t"+n.join(r,"\r\n\t")+"\r\n}"};var s=new CustomifyAutoCSS;o.bind("preview-ready",function(){s.lastValues=o.get(),s.values=o.get()}),o.bind("change",function(){}),_.each(Customify_Preview_Config.fields,function(t){(t.selector&&t.css_format||"modal"===t.type)&&wp.customize(t.name,function(e){e.bind(function(e){s.run(t.name)})})})}(jQuery,wp.customize);